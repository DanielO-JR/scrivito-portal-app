"use strict";(("undefined"!=typeof self?self:global).webpackChunk=("undefined"!=typeof self?self:global).webpackChunk||[]).push([[599],{8599:(t,e,n)=>{n.r(e),n.d(e,{Editor:()=>st,Team:()=>ot,editorRegistrationFor:()=>u,getCachedValidationReportEntries:()=>A,getDataStackVariables:()=>Q,getDataVariablesFor:()=>U,getGlobalDataVariables:()=>Y,installDndHandler:()=>a,installScrollHandler:()=>y,openContentBrowser:()=>g,registerEditor:()=>l,reloadIfContextChangesFrom:()=>H,runValidationsFor:()=>I,setModeIndicators:()=>v,titleForBasicWidget:()=>C,validationResultsFor:()=>N});var r=n(4712),i=n(9853);function a(){const t=(0,i.Me)();t.addEventListener("dragover",(t=>function(t){t.dataTransfer.dropEffect="move",t.preventDefault();const e={x:t.pageX,y:t.pageY};(0,r.K)().dragTo(e)}(t))),t.addEventListener("drop",(()=>{(0,r.K)().drop()}))}var o=n(2757);let s=0,c={};function l(t){const e=(s++,s.toString());c[e]=t;const n=f.get()||[];f.set([...n,e])}function u({type:t,tag:e}){const n=f.get();if(n){const r=n.find((n=>c[n]&&c[n].canEdit({type:t,tag:e})));if(r){return{id:r,editorClass:c[r]}}}}const f=(0,o.JH)();(0,i.rj)((function(){s=0,c={},f.clear()}));var d=n(6993);function v(){const t=(0,i.Me)().body;t.classList.add("scrivito_editing_active"),(0,d.DG)()&&t.setAttribute("data-scrivito-editing",""),(0,d.rl)()&&t.setAttribute("data-scrivito-comparison","")}var b=n(8493);function g(t={}){return(0,r.K)().openContentBrowser((0,b.f)(t))}const p=30,m=25;function y(){(0,i.Me)().addEventListener("dragover",(t=>{const e=t.clientY,n=(0,i.bY)(),r=(0,i.XO)();r>0&&e<p?(0,i.X5)(n,r-m):(0,i.aZ)()>r+(0,i.WS)()&&e>(0,i.WS)()-p&&(0,i.X5)(n,r+m)}))}var j=n(384),h=n(105);function C(t){return function(t){var e;const n=t.objClass(),r=null==(e=(0,j.x)(n))?void 0:e.titleForContent;if("function"==typeof r)try{return r((0,h.pz)(t))}catch(t){(0,i.a6)(t)}}(t)||(e=t.objClass(),(null==(n=(0,j.x)(e))?void 0:n.title)||(0,i.G8)(e));var e,n}var E=n(8273);const w=function(t){return(null==t?0:t.length)?(0,E.Z)(t,Infinity):[]};var O=n(8142),k=n(6664),_=n(9880),D=Object.defineProperty,P=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable,$=(t,e,n)=>e in t?D(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,V=(t,e)=>{for(var n in e||(e={}))x.call(e,n)&&$(t,n,e[n]);if(P)for(var n of P(e))F.call(e,n)&&$(t,n,e[n]);return t};const S={error:0,warning:1,info:2},G=(0,i.PJ)("validationResultsFor",[["model",i.pC.union([_.Bt,_.l9])],["attributeName",i.pC.String]],{docPermalink:"js-sdk/validationResultsFor"});function N(t,e,...n){return G(t,e,...n),A(t._scrivitoPrivateContent).filter((t=>(0,i.iS)(t)&&t.attributeName===e)).sort((({severity:t},{severity:e})=>S[t]-S[e])).map((t=>({message:t.message,severity:t.severity})))}const A=(0,k.wV)([],(t=>t instanceof _.Jj?t.id():`${t.obj().id()}/${t.id()}`),I);function I(t){var e;const n=t instanceof _.Jj?t:t.obj();if(!n.isEdited()&&!n.isNew())return[];const r=t.objClass(),a=null==(e=(0,j.x)(r))?void 0:e.validations;if(!a)return[];const o=(0,h.pz)(t);return w(a.map((t=>(0,O.eK)(t)?function(t,e){return T(`Please check validations for the model ${e._scrivitoPrivateContent.objClass()}. `,t,e).map(J)}(t,o):function(t,e){const[n,...r]=t,a=e._scrivitoPrivateContent.objClass();if(!function(t){return!(0,i.mb)(t)||K(t)}(n))return(0,i.a6)(new i.ir(`Found an attribute validation callback for the system attribute ${n} of the model ${a}. Attribute validations can only be used for custom attributes and for the system attributes "_language" and "_permalink". For other system attributes please use class-based validations. Visit ${(0,i.m0)("js-sdk/provideEditingConfig#validations")} for more information.`)),[];let o;if(K(n)){const t=e._scrivitoPrivateContent;if(!(t instanceof _.Jj))return[];switch(n){case"_language":o=t.language();break;case"_permalink":o=t.permalink()}}else{const t=h.V_.basicFieldFor(e,n);if(!t)return[];o=(0,h.pz)(t.get())}const s=V({name:n},(l=e,l._scrivitoPrivateContent instanceof _.Jj?{content:e,obj:e}:{content:e,widget:e})),c=`Please check validations for the attribute ${n} of the model ${a}. `;var l;return w(r.map((t=>{var e;const r=(0,O.np)(t),i=(0,O.tj)(t)&&(null==(e=t[0])?void 0:e.severity);return T(c,r,o,s).map((t=>({attributeName:n,message:t.message,severity:i||t.severity||"error"})))})))}(t,o))))}function J(t){return{message:t.message,severity:t.severity||"error"}}function K(t){return["_language","_permalink"].includes(t)}function T(t,e,...n){let r;try{r=e(...n)}catch(t){return(0,i.a6)(t),[]}return r?"string"==typeof r?[{message:r}]:Array.isArray(r)&&r.every((t=>"string"==typeof t))?r.map((t=>({message:t}))):function(t){return!!t&&"object"==typeof t&&!!t.message&&(e=t.severity,"string"==typeof e&&-1!==O.bI.indexOf(e));var e}(r)?[r]:((0,i.a6)(new i.ir(`A validation must return a validation result or a falsy value. ${t}Visit ${(0,i.m0)("js-sdk/provideEditingConfig#validations")} for more information.`)),[]):[]}function H(t){(0,k.DU)((()=>(0,r.K)().currentEditingContext())).subscribe((e=>{const n=null==e?void 0:e.windowName;n&&n!==t&&((0,i.sy)(n),(0,i.H5)())}))}var M=n(785),R=n(9528),B=Object.defineProperty,L=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable,Z=(t,e,n)=>e in t?B(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,z=(t,e)=>{for(var n in e||(e={}))W.call(e,n)&&Z(t,n,e[n]);if(L)for(var n of L(e))X.call(e,n)&&Z(t,n,e[n]);return t};const Y=(0,k.wV)(void 0,(()=>{const t=function(){const t={};return(0,R.d$)().forEach((e=>{const n=e.dataClassName(),r=(0,j.x)(n),a=nt(null==r?void 0:r.title,n),o=null==r?void 0:r.attributes;if(o)Object.entries(o).forEach((([r,{title:i}])=>t[et(n,r)]=tt(a,nt(i,r),e.get(r))));else{const r=e.getExternalData();r&&Object.entries(r).forEach((([e,r])=>t[et(n,e)]=tt(a,(0,i.G8)(e),r)))}})),t}();return Object.keys(t).length?t:void 0}));const Q=(0,k.wV)(void 0,(function(t){return t.filter(R.Fv).map((({_class:t,_id:e})=>`${t}:${e}`)).join()}),(function(t){const e=t.filter(R.Fv).map((({_class:t,_id:e})=>{var n;return null==(n=(0,R.KT)(t))?void 0:n.get(e)})).filter((t=>!!t)).map(q).filter((t=>!!t));return 0===e.length?void 0:Object.assign({},...e)}));function U(t,e){const n=rt(t);if(n)return function(t,e){return(0,M.Z)(t,((t,n)=>z({title:t},function(t,e){if(!e)return;const n=e[t];return void 0===n?void 0:{value:n}}(n,e))))}(n,e)}function q(t){let e,n;const r=t.obj();r&&(e=r?(0,R.Gc)((0,h.bM)(r)):void 0,n=e?Object.keys(e):[]);const a={},o=t.dataClassName(),s=(0,j.x)(o),c=nt(null==s?void 0:s.title,o),l=null==s?void 0:s.attributes;if(l)Object.entries(l).forEach((([e,{title:r}])=>{n&&!n.includes(e)||(a[et(o,e)]=tt(c,nt(r,e),t.get(e)))}));else if(e)Object.entries(e).forEach((([t,e])=>a[et(o,t)]=tt(c,(0,i.G8)(t),e)));else if(t instanceof R.HP){const e=t.getExternalData();e&&Object.entries(e).forEach((([t,e])=>a[et(o,t)]=tt(c,(0,i.G8)(t),e)))}return a}function tt(t,e,n){return{dataClassTitle:t,title:e,value:"string"==typeof n?n:""}}function et(t,e){return`${t}.${e}`}function nt(t,e){return t||(0,i.G8)(e)}function rt(t){var e;const n=t.getContainer(),r=null==(e=(0,j.x)(n.objClass()))?void 0:e.attributeDataContext;if(r){const e=r[t.name()];return"string"==typeof e?function(t,e){var n;const r=t.getContainer().get(e,"datalocator"),i=r.class();if(null===i)return;const a=null==(n=(0,j.x)(i))?void 0:n.attributes;if(!a)return;return(0,M.Z)(a,(({title:t},e)=>nt(t,e)))}(t,e):e}if(n instanceof _.E8){const t=n.obj().fieldContainingWidget(n);if(t)return rt(t)}}var it=n(7879),at=n(9099);class ot{constructor(t){this.teamData=t}id(){return this.teamData.id}name(){return this.teamData.name}description(){return this.teamData.description||""}}class st extends at.n{constructor(t,e){super(t),this.teamsData=e}teams(){return this.teamsData.map((t=>new ot(t)))}authToken(t){return(0,it.Q)(t)||""}}}}]);