"use strict";(("undefined"!=typeof self?self:global).webpackChunk=("undefined"!=typeof self?self:global).webpackChunk||[]).push([[461],{1328:(t,e,n)=>{n.r(e),n.d(e,{Editor:()=>it,Team:()=>rt,editorRegistrationFor:()=>u,getCachedValidationReportEntries:()=>S,getDataStackVariables:()=>Y,getDataVariablesFor:()=>U,getGlobalDataVariables:()=>z,installDndHandler:()=>a,installScrollHandler:()=>g,isAttributeValidationReportEntry:()=>j,openContentBrowser:()=>p,registerEditor:()=>c,reloadIfContextChangesFrom:()=>L,runValidationsFor:()=>T,setModeIndicators:()=>v,titleForBasicWidget:()=>h,validationResultsFor:()=>A});var r=n(7515),i=n(9802);function a(){const t=(0,i.Me)();t.addEventListener("dragover",(t=>function(t){t.dataTransfer.dropEffect="move",t.preventDefault();const e={x:t.pageX,y:t.pageY};(0,r.K)().dragTo(e)}(t))),t.addEventListener("drop",(()=>{(0,r.K)().drop()}))}var o=n(9541);let s=0,l={};function c(t){const e=(s++,s.toString());l[e]=t;const n=d.get()||[];d.set([...n,e])}function u({type:t,tag:e}){const n=d.get();if(n){const r=n.find((n=>l[n]&&l[n].canEdit({type:t,tag:e})));if(r){return{id:r,editorClass:l[r]}}}}const d=(0,o.JH)();var f=n(8084);function v(){const t=(0,i.Me)().body;t.classList.add("scrivito_editing_active"),(0,f.DG)()&&t.setAttribute("data-scrivito-editing",""),(0,f.rl)()&&t.setAttribute("data-scrivito-comparison","")}var b=n(3409);function p(t={}){return(0,r.K)().openContentBrowser((0,b.f)(t))}function g(){(0,i.Me)().addEventListener("dragover",(t=>{const e=t.clientY,n=(0,i.bY)(),r=(0,i.XO)();r>0&&e<30?(0,i.X5)(n,r-25):(0,i.aZ)()>r+(0,i.WS)()&&e>(0,i.WS)()-30&&(0,i.X5)(n,r+25)}))}var m=n(8611),y=n(5932);function h(t){return function(t){var e;const n=t.objClass(),r=null==(e=(0,m.xk)(n))?void 0:e.titleForContent;if("function"==typeof r)try{return r((0,y.pz)(t))}catch(t){(0,i.a6)(t)}}(t)||(e=t.objClass(),(null==(n=(0,m.xk)(e))?void 0:n.title)||(0,i.G8)(e));var e,n}function j(t){return!!t.attributeName}var C=n(426),k=n.n(C),w=n(6666),E=n(7975),O=n(506),_=Object.defineProperty,$=Object.getOwnPropertySymbols,F=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,x=(t,e,n)=>e in t?_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;const D={error:0,warning:1,info:2},V=(0,i.PJ)("validationResultsFor",[["model",i.pC.union([O.Bt,O.l9])],["attributeName",i.pC.String]],{docPermalink:"js-sdk/validationResultsFor"});function A(t,e,...n){return V(t,e,...n),S(t._scrivitoPrivateContent).filter((t=>j(t)&&t.attributeName===e)).sort((({severity:t},{severity:e})=>D[t]-D[e])).map((t=>({message:t.message,severity:t.severity})))}const S=(0,E.wV)([],(t=>t instanceof O.Jj?t.id():`${t.obj().id()}/${t.id()}`),T);function T(t){var e;const n=t instanceof O.Jj?t:t.obj();if(!n.isEdited()&&!n.isNew())return[];const r=t.objClass(),a=null==(e=(0,m.xk)(r))?void 0:e.validations;if(!a)return[];const o=(0,y.pz)(t);return k()(a.map((t=>(0,w.eK)(t)?function(t,e){return K(`Please check validations for the model ${e._scrivitoPrivateContent.objClass()}. `,t,e).map(I)}(t,o):function(t,e){const[n,...r]=t,a=e._scrivitoPrivateContent.objClass();if(!function(t){return!(0,i.mb)(t)||J(t)}(n))return(0,i.a6)(new i.ir(`Found an attribute validation callback for the system attribute ${n} of the model ${a}. Attribute validations can only be used for custom attributes and for the system attributes "_language" and "_permalink". For other system attributes please use class-based validations. Visit ${(0,i.m0)("js-sdk/provideEditingConfig#validations")} for more information.`)),[];let o;if(J(n)){const t=e._scrivitoPrivateContent;if(!(t instanceof O.Jj))return[];switch(n){case"_language":o=t.language();break;case"_permalink":o=t.permalink()}}else{const t=y.V_.basicFieldFor(e,n);if(!t)return[];o=(0,y.pz)(t.get())}const s=((t,e)=>{for(var n in e||(e={}))F.call(e,n)&&x(t,n,e[n]);if($)for(var n of $(e))P.call(e,n)&&x(t,n,e[n]);return t})({name:n},(c=e,c._scrivitoPrivateContent instanceof O.Jj?{content:e,obj:e}:{content:e,widget:e})),l=`Please check validations for the attribute ${n} of the model ${a}. `;var c;return k()(r.map((t=>{var e;const r=(0,w.np)(t),i=(0,w.tj)(t)&&(null==(e=t[0])?void 0:e.severity);return K(l,r,o,s).map((t=>({attributeName:n,message:t.message,severity:i||t.severity||"error"})))})))}(t,o))))}function I(t){return{message:t.message,severity:t.severity||"error"}}function J(t){return["_language","_permalink"].includes(t)}function K(t,e,...n){let r;try{r=e(...n)}catch(t){return(0,i.a6)(t),[]}return r?"string"==typeof r?[{message:r}]:Array.isArray(r)&&r.every((t=>"string"==typeof t))?r.map((t=>({message:t}))):function(t){return!!t&&"object"==typeof t&&!!t.message&&(e=t.severity,"string"==typeof e&&-1!==w.bI.indexOf(e));var e}(r)?[r]:((0,i.a6)(new i.ir(`A validation must return a validation result or a falsy value. ${t}Visit ${(0,i.m0)("js-sdk/provideEditingConfig#validations")} for more information.`)),[]):[]}function L(t){(0,E.DU)((()=>(0,r.K)().currentEditingContext())).subscribe((e=>{const n=null==e?void 0:e.windowName;n&&n!==t&&((0,i.sy)(n),(0,i.H5)())}))}var N=n(9636),R=n.n(N),G=n(9145),M=Object.defineProperty,X=Object.getOwnPropertySymbols,B=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,W=(t,e,n)=>e in t?M(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;const z=(0,E.wV)(void 0,(function(){let t;return(0,G.d$)().forEach((e=>{const n=e.dataClass().name(),r=(0,m.xk)(n),i=null==r?void 0:r.attributes;if(!i)return;const a=q(r.title,n);Object.entries(i).forEach((([r,{title:i}])=>{const o=e.get(r);t||(t={}),t[`${n}.${r}`]={dataClassTitle:a,title:q(i,r),value:"string"==typeof o?o:void 0}}))})),t}));const Y=(0,E.wV)(void 0,(function(t){return t.filter(G.Fv).map((({_class:t,_id:e})=>`${t}:${e}`)).join()}),(function(t){const e=t.filter(G.Fv).map((({_class:t,_id:e})=>{var n;return null==(n=(0,G.KT)(t))?void 0:n.get(e)})).filter((t=>!!t)).map(Z).filter((t=>!!t));return 0===e.length?void 0:Object.assign({},...e)}));function U(t,e){const n=Q(t);if(n)return function(t,e){return R()(t,((t,n)=>((t,e)=>{for(var n in e||(e={}))B.call(e,n)&&W(t,n,e[n]);if(X)for(var n of X(e))H.call(e,n)&&W(t,n,e[n]);return t})({title:t},function(t,e){if(!e)return;const n=e[t];return void 0===n?void 0:{value:n}}(n,e))))}(n,e)}function Z(t){let e;const n=t.obj();if(n){const t=n?(0,G.Gc)((0,y.bM)(n)):void 0;e=t?Object.keys(t):[]}const r=t.dataClass().name(),i=(0,m.xk)(r),a=null==i?void 0:i.attributes,o=q(null==i?void 0:i.title,r);if(!a)return;const s={};return Object.keys(a).forEach((n=>{var i;if(e&&!e.includes(n))return;const l=q(null==(i=a[n])?void 0:i.title,n),c=t.get(n);"string"==typeof c&&(s[`${r}.${n}`]={dataClassTitle:o,title:l,value:c})})),s}function q(t,e){return t||(0,i.G8)(e)}function Q(t){var e;const n=t.getContainer(),r=null==(e=(0,m.xk)(n.objClass()))?void 0:e.attributeDataContext;if(r){const e=r[t.name()];return"string"==typeof e?function(t,e){var n;const r=t.getContainer().get(e,"datalocator").class();if(null===r)return;const i=null==(n=(0,m.xk)(r))?void 0:n.attributes;if(!i)return;return R()(i,(({title:t},e)=>q(t,e)))}(t,e):e}if(n instanceof O.E8){const t=n.obj().fieldContainingWidget(n);if(t)return Q(t)}}var tt=n(3467),et=n(9470),nt=n(1425);class rt{constructor(t){this.teamData=t}id(){return this.teamData.id}name(){return this.teamData.name}description(){return this.teamData.description||""}}class it extends nt.n{constructor(t,e){super(t),this.teamsData=e}teams(){return this.teamsData.map((t=>new rt(t)))}authToken(){var t;const e=null==(t=et.k)?void 0:t.getEditorAuthToken({treatLocalhostLike:(0,tt.XF)()});if(!e)return"";if("string"!=typeof e.token)throw new i.Ix(e.error);return e.token}}}}]);